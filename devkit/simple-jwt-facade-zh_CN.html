<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>码匠 CodeCrafters | 码匠 CodeCrafters</title><meta name="author" content="CodeCrafters CN"><meta name="copyright" content="CodeCrafters CN"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Module simple-jwt-facadeIntroductionThe simple-jwt-facade module is a lightweight and easy-to-use façade for working with JSON Web Tokens (JWT) in Java applications. It provides a simplified interface">
<meta property="og:type" content="website">
<meta property="og:title" content="码匠 CodeCrafters">
<meta property="og:url" content="https://codecrafters.org.cn/devkit/simple-jwt-facade-zh_CN.html">
<meta property="og:site_name" content="码匠 CodeCrafters">
<meta property="og:description" content="Module simple-jwt-facadeIntroductionThe simple-jwt-facade module is a lightweight and easy-to-use façade for working with JSON Web Tokens (JWT) in Java applications. It provides a simplified interface">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:published_time" content="2024-01-31T09:01:54.091Z">
<meta property="article:modified_time" content="2024-01-31T09:01:54.091Z">
<meta property="article:author" content="CodeCrafters CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/image/favicon.ico"><link rel="canonical" href="https://codecrafters.org.cn/devkit/simple-jwt-facade-zh_CN.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: CodeCrafters CN","link":"链接: ","source":"来源: 码匠 CodeCrafters","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '码匠 CodeCrafters',
  isPost: false,
  isHome: false,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '31-1月-2024 17:01:54'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="//at.alicdn.com/t/c/font_4134047_jxqssukwk8o.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">2</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-code"></i><span> DevKit</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/devkit"><span> DevKit Home</span></a></li><li><a class="site-page child" href="/devkit/changelog"><span> DevKit Changelog</span></a></li><li><a class="site-page child" href="/devkit/devkit-core"><span> DevKit-Core</span></a></li><li><a class="site-page child" href="/devkit/devkit-utils"><span> DevKit-Utils</span></a></li><li><a class="site-page child" href="/devkit/guid"><span> GUID</span></a></li><li><a class="site-page child" href="/devkit/webcal"><span> WebCal</span></a></li><li><a class="site-page child" href="/devkit/simple-jwt-facade"><span> SimpleJWT Facade</span></a></li><li><a class="site-page child" href="/devkit/simple-jwt-authzero"><span> SimpleJWT Auth0</span></a></li><li><a class="site-page child" href="/devkit/simple-jwt-jjwt"><span> SimpleJWT JJWT</span></a></li><li><a class="site-page child" href="/devkit/simple-jwt-spring-boot-starter"><span> SimpleJWT Spring Boot Starter</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 项目</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/5bcd5085/vocab-buddy/"><span> Vocab Buddy</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://github.com/codecrafterscn"><i class="fa-fw iconfont icon-github"></i><span> GitHub</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-info"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/join-us/"><i class="fa-fw fas fa-user-plus"></i><span> 加入我们</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="not-home-page" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="码匠 CodeCrafters"><span class="site-name">码匠 CodeCrafters</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-code"></i><span> DevKit</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/devkit"><span> DevKit Home</span></a></li><li><a class="site-page child" href="/devkit/changelog"><span> DevKit Changelog</span></a></li><li><a class="site-page child" href="/devkit/devkit-core"><span> DevKit-Core</span></a></li><li><a class="site-page child" href="/devkit/devkit-utils"><span> DevKit-Utils</span></a></li><li><a class="site-page child" href="/devkit/guid"><span> GUID</span></a></li><li><a class="site-page child" href="/devkit/webcal"><span> WebCal</span></a></li><li><a class="site-page child" href="/devkit/simple-jwt-facade"><span> SimpleJWT Facade</span></a></li><li><a class="site-page child" href="/devkit/simple-jwt-authzero"><span> SimpleJWT Auth0</span></a></li><li><a class="site-page child" href="/devkit/simple-jwt-jjwt"><span> SimpleJWT JJWT</span></a></li><li><a class="site-page child" href="/devkit/simple-jwt-spring-boot-starter"><span> SimpleJWT Spring Boot Starter</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 项目</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/5bcd5085/vocab-buddy/"><span> Vocab Buddy</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://github.com/codecrafterscn"><i class="fa-fw iconfont icon-github"></i><span> GitHub</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-info"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/join-us/"><i class="fa-fw fas fa-user-plus"></i><span> 加入我们</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="page-site-info"><h1 id="site-title">码匠 CodeCrafters</h1></div></header><main class="layout" id="content-inner"><div id="page"><div id="article-container"><h1 id="Module-simple-jwt-facade"><a href="#Module-simple-jwt-facade" class="headerlink" title="Module simple-jwt-facade"></a>Module <code>simple-jwt-facade</code></h1><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>The <code>simple-jwt-facade</code> module is a lightweight and easy-to-use façade for working with JSON Web Tokens (JWT) in Java applications. It provides a simplified interface and utilities to handle the creation, validation, renewal, and processing of JWTs without the need for complex configurations or third-party dependencies.</p>
<h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><p>This whole <code>JDevKit</code> is developed by <strong>JDK 17</strong>, which means you have to use JDK 17 for better experience.</p>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><h3 id="If-you-are-using-Maven"><a href="#If-you-are-using-Maven" class="headerlink" title="If you are using Maven"></a>If you are using <code>Maven</code></h3><p>It is quite simple to install this module by <code>Maven</code>. The only thing you need to do is find your <code>pom.xml</code> file in the project, then find the <code>&lt;dependencies&gt;</code> node in the <code>&lt;project&gt;</code> node, and add the following codes to <code>&lt;dependencies&gt;</code> node:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.org.codecrafters<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>simple-jwt-facade<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;simple-jwt-facade.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>And run <code>mvn dependency:get</code> in your project root folder(i.e., if your <code>pom.xml</code> is located at <code>/path/to/your/project/pom.xml</code>, then your current work folder should be <code>/path/to/your/project</code>), then <code>Maven</code> will automatically download the <code>jar</code> archive from <code>Maven Central Repository</code>. This could be <strong>MUCH EASIER</strong> if you are using IDE(i.e., IntelliJ IDEA), the only thing you need to do is click the refresh button of <code>Maven</code>.</p>
<p>If you are restricted using the Internet, and have to make <code>Maven</code> offline, you could follow the following steps.</p>
<ol>
<li>Download the <code>jar</code> file from any place you can get and transfer the <code>jar</code> files to your work computer.</li>
<li>Move the <code>jar</code> files to your local <code>Maven</code> Repository as the path of <code>/path/to/maven_local_repo/cn/org/codecrafters/simple-jwt-facade/</code>.</li>
</ol>
<h3 id="If-you-are-using-Gradle"><a href="#If-you-are-using-Gradle" class="headerlink" title="If you are using Gradle"></a>If you are using <code>Gradle</code></h3><p>Add this module to your project with <code>Gradle</code> is much easier than doing so with <code>Maven</code>.</p>
<p>Find <code>build.gradle</code> in the needed project, and add the following code to the <code>dependencies</code> closure in the build script:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">&#x27;cn.org.codecrafters:simple-jwt-facade:$&#123;simple-jwt-facade.version&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="If-you-are-not-using-Maven-or-Gradle"><a href="#If-you-are-not-using-Maven-or-Gradle" class="headerlink" title="If you are not using Maven or Gradle"></a>If you are not using <code>Maven</code> or <code>Gradle</code></h3><ol>
<li>Download the <code>jar</code> file from the Internet.</li>
<li>Create a folder in your project and name it as a name you like(i.e., for me, I prefer <code>vendor</code>).</li>
<li>Put the <code>jar</code> file to the folder you just created in Step 2.</li>
<li>Add this folder to your project <code>classpath</code>.</li>
</ol>
<h2 id="Implement-a-TokenResolver"><a href="#Implement-a-TokenResolver" class="headerlink" title="Implement a TokenResolver"></a>Implement a <code>TokenResolver</code></h2><p>If you want to use <code>TokenResolver</code> to handle with JWTs, you can choose to use any implementation such as <code>cn.org.codecrafters:simple-jwt-authzero</code> or any other <code>simple-jwt-$implementation_artifact</code>. But if you do choose to use other implementation, it is not the topic we are going to talk about here. We are here for helping you to implement one by yourself.</p>
<p>First, you are going to choose a third-party library or your own library which is aims to process JWTs(i.e., <code>com.auth0:java-jwt</code> and <code>io.jsonwebtoken:jjwt</code>). Then, you need to confirm which class they are going to use for a parsed JWT(i.e., <code>DecodedJWT</code> is being used in <code>com.auth0:java-jwt</code>). And let me use <code>com.auth0:java-jwt</code> for example in this tutor.</p>
<p>Then, you can add these following codes in your project:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Auth0TokenResolver</span> <span class="keyword">implements</span> <span class="title class_">TokenResolver</span>&lt;DecodedJWT&gt; &#123;</span><br><span class="line">    <span class="comment">// Dont forget to implement methods in interface TokenResolver.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>After doing all these, an implemented <code>TokenResolver</code> is ready to process JWTs.</p>
<p><strong>Let’s pretend that you already implemented a <code>TokenResolver</code> and named as <code>ImplementedTokenResolver</code>.</strong></p>
<p>You will need an instance of the implementation to process JWTs.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">tokenResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ImplementedTokenResolver</span>(<span class="comment">/* arguments you declared */</span>)</span><br></pre></td></tr></table></figure>

<h2 id="Create-a-JSON-Web-Token-with-TokenResolver"><a href="#Create-a-JSON-Web-Token-with-TokenResolver" class="headerlink" title="Create a JSON Web Token with TokenResolver"></a>Create a JSON Web Token with <code>TokenResolver</code></h2><p>Then, there are 3 method to create a token:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String <span class="title function_">createToken</span><span class="params">(java.time.Duration expireAfter, String audience, String subject)</span>;</span><br><span class="line"></span><br><span class="line">String <span class="title function_">createToken</span><span class="params">(java.time.Duration expireAfter, String audience, String subject, Map&lt;String, Object&gt; payloads)</span>;</span><br><span class="line"></span><br><span class="line">&lt;T <span class="keyword">extends</span> <span class="title class_">TokenPayload</span>&gt; String <span class="title function_">createToken</span><span class="params">(java.time.Duration expireAfter, String audience, String subject, T payload)</span>;</span><br></pre></td></tr></table></figure>

<h2 id="Read-or-Verify-a-JSON-Web-Token"><a href="#Read-or-Verify-a-JSON-Web-Token" class="headerlink" title="Read or Verify a JSON Web Token"></a>Read or Verify a JSON Web Token</h2><p>There are many ways to read a JWT.</p>
<p>If you want to read as the data class which is designed by the third-party library, you can just use <code>resolve(String token)</code>. If you want know what is contained in this JWT, you can use <code>extract(String, Class&lt;?&gt;)</code>.</p>
<p>Meanwhile, the <code>resolve(token)</code> method also serves as a token validation mechanism. If any issues arise, such as token expiration, tampering suspicion, or mismatched token signatures, corresponding exceptions will be thrown.</p>
<h2 id="Renew-a-Token-that-is-About-to-Expire"><a href="#Renew-a-Token-that-is-About-to-Expire" class="headerlink" title="Renew a Token that is About to Expire"></a>Renew a Token that is About to Expire</h2><p>When a token is about to expire, its validity period can be extended using this method, allowing users to obtain a new valid token without the need for re-login.</p>
<p><strong>Renew a token</strong> means that the content of the pre-defined properties by JWT, such as the audience (aud) representing the recipient of this token, will not be altered, except for the time-related fields.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String <span class="title function_">renew</span><span class="params">(String oldToken, Map&lt;String, Object&gt; payload)</span>;</span><br></pre></td></tr></table></figure>

<p>This method allows you to pass new custom payload into the updated token. The new token will be available for 30 minutes.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String <span class="title function_">renew</span><span class="params">(String oldToken, Duration expireAfter, Map&lt;String, Object&gt; payload)</span>;</span><br></pre></td></tr></table></figure>

<p>This method allows you to pass new custom payload into the updated token. The new token will be available for the specific duration.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;T <span class="keyword">extends</span> <span class="title class_">TokenPayload</span>&gt; String <span class="title function_">renew</span><span class="params">(String oldToken, Duration expireAfter, T payload)</span>;</span><br></pre></td></tr></table></figure>

<p>This method allows you to pass new custom payload into the updated token. The new token will be available for 30 minutes.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;T <span class="keyword">extends</span> <span class="title class_">TokenPayload</span>&gt; String <span class="title function_">renew</span><span class="params">(String oldToken, Duration expireAfter, T  payload)</span>;</span><br></pre></td></tr></table></figure>

<p>This method allows you to pass new custom payload into the updated token. The new token will be available for the specific duration.</p>
<h2 id="Handle-Enum-Value-in-Base-Types"><a href="#Handle-Enum-Value-in-Base-Types" class="headerlink" title="Handle Enum Value in Base Types"></a>Handle Enum Value in Base Types</h2><p>JWT 原生不支持处理枚举值，因此需要将这些枚举值数据转换为基础数据类型进行处理。通过给数据的枚举值字段上标记 <code>@TokenEnum</code> 注解，并配置属性 <code>propertyName</code> 和 <code>dataType</code>。属性 <code>propertyName</code> 表示该枚举字段作为基础数据类型的字段，属性 <code>dataType</code> 表示需要用什么基础数据类型来表示该枚举字段，例如有如下枚举值：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">SampleEnum</span> &#123;</span><br><span class="line">    SAMPLE_ENUM_1(<span class="number">1</span>),</span><br><span class="line">    SAMPLE_ENUM_2(<span class="number">2</span>),</span><br><span class="line">    ;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Integer code;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    SampleEnum(Integer code) &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>例如现在有下面的 <code>Payload Class</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SampleModel</span> <span class="keyword">implements</span> <span class="title class_">TokenPayload</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String sampleStringValue;</span><br><span class="line">    <span class="keyword">private</span> Integer sampleIntegerValue;</span><br><span class="line">    <span class="keyword">private</span> SampleEnum sampleEnumValue;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// getters and setters...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果您的类需要将上述枚举值作为整形数据进行处理，那么 <code>propertyName</code> 应该为 <code>code</code>，而 <code>dataType</code> 应该为 <code>cn.org.codecrafters.simplejwt.constants.TokenDataType.INTEGER</code>。</p>
<p>在枚举值类型的输出方面，您仅需根据 <code>propertyName</code> 实现其对应的 <code>getter</code>；如果您需要根据基础类型转换为对应的枚举值，您需要实现一个静态的 <code>loader</code> 方法，该方法的签名应该为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;EnumValueClass&gt; loadBy&lt;PropertyName&gt;(&lt;DataTypeClass&gt; value);</span><br></pre></td></tr></table></figure>

<p>该 <code>EnumValueClass</code> 为类中的枚举值的类名；<code>PropertyName</code> 为 <code>@TokenEnum</code> 标注中 <code>propertyName</code> 的大驼峰表示；<code>DataTypeClass</code> 为 <code>@TokenEnum</code> 标注中 <code>dataType</code> 枚举值所对应的类；以上面的 <code>Payload Class</code> 为例，则对应的 <code>loader</code> 代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> SampleEnum <span class="title function_">loadByCode</span><span class="params">(Integer value)</span> &#123;</span><br><span class="line">    <span class="comment">// return the mapped enum value by integer value.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Contact"><a href="#Contact" class="headerlink" title="Contact"></a>Contact</h2><p>If you have any suggestions, ideas, don’t hesitate contacting us via <a target="_blank" rel="noopener" href="https://github.com/CodeCraftersCN/jdevkit/issues/new">GitHub Issues</a> or <a target="_blank" rel="noopener" href="https://discord.gg/NQK9tjcBB8">Discord Community</a>. </p>
<p>If you face any bugs while using our library and you are able to fix any bugs in our library, we would be happy to accept pull requests from you on <a target="_blank" rel="noopener" href="https://github.com/CodeCraftersCN/jdevkit/compare">GitHub</a>.</p>
</div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">CodeCrafters CN</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">2</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/codecrafterscn"><i class="fab fa-github"></i><span>在 GitHub 上关注我</span></a></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/5bcd5085/vocab-buddy/" title="Vocab Buddy">Vocab Buddy</a><time datetime="2023-06-22T04:50:55.000Z" title="发表于 22-6月-2023 12:50:55">22-6月-2023</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/63341/project-introductions/" title="项目列表">项目列表</a><time datetime="2023-06-22T03:56:04.000Z" title="发表于 22-6月-2023 11:56:04">22-6月-2023</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Introduction/"><span class="card-category-list-name">Introduction</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Project/"><span class="card-category-list-name">Project</span><span class="card-category-list-count">1</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Vue-3/" style="font-size: 1.1em; color: #999">Vue 3</a> <a href="/tags/TypeScript/" style="font-size: 1.1em; color: #999">TypeScript</a> <a href="/tags/SpringBoot-3/" style="font-size: 1.1em; color: #999">SpringBoot 3</a> <a href="/tags/Java-17/" style="font-size: 1.1em; color: #999">Java 17</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">六月 2023</span><span class="card-archive-list-count">2</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">2</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-01-31T09:17:19.223Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By CodeCrafters CN</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'twikoo-comments-5gvfhs7r3850d5f7',
      region: 'ap-shanghai',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'twikoo-comments-5gvfhs7r3850d5f7',
      region: 'ap-shanghai',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.textContent = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>